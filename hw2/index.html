<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>otus js hw2</title>
</head>
<body>

<div id="t1">
    <div>
        <span></span>
    </div>
    <div>
        <div>
            <a></a>
            <a></a>
            <a id="t2"></a>
            <a></a>
            <span></span>
            <span></span>
            <span></span>
            <span>
                <a href=""></a>
                <a id="t3"></a>
            </span>

            <span></span>
            <span></span>
        </div>
    </div>
    <div></div>
    <span></span>

</div>

<script>

    'use strict';

    /**
     * Функция возвращает уникальный css-селектор элемента
     * @param node
     * @returns {string|*}
     */

    function getPath(node) {

        let path = '';

        return climb();

        function climb() {

            let sibCounter; // счётчик братьев
            let curTagName; // тэг текущей ноды

            /**
             * проверка исключений:
             * - у элемента есть id;
             * - родитель элемента сразу body;
             */

            // если есть id
            /*
            if(node.id) {
                return `#${node.id}`;
            }
            */

            //@todo выделить обход sibling'ов в отдельную функцию и использовать её здесь!
            if (node.parentNode.tagName.toLowerCase() === 'body') {
                return `body > ${node.tagName}`;
            }

            /**
             * пока есть родитель и это не body "собираем" узлы дерева по дороге в селектор
             */
            while (node.parentElement && node.parentElement.tagName.toLowerCase() !== 'body') {

                sibCounter = 1;
                curTagName = node.tagName;

                /**
                 * проходимся по братьям(если лни есть) до родителя, считаем сколько их
                 */
                while (node.previousElementSibling) {
                    node = node.previousElementSibling;
                    sibCounter++;
                }

                path = (sibCounter > 1) ?
                    curTagName + `:nth-child(${sibCounter}) > ` + path :
                    curTagName + ' > ' + path;

                node = node.parentNode;

            }
            return path.toLowerCase().slice(0, -2);
        }
    }

    console.log(getPath(document.getElementById("t1")));
    console.log(getPath(document.getElementById("t2")));
    console.log(getPath(document.getElementById("t3")));

</script>

</body>
</html>